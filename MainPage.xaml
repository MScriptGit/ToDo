<?xml version="1.0" encoding="utf-8"?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    
    xmlns:local="clr-namespace:ToDo"
    
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="ToDo.MainPage">
    <ScrollView
        x:Name="scrollView"
        Orientation="Vertical"
        VerticalOptions="FillAndExpand">
        <VerticalStackLayout
            Padding="20,0"
            Spacing="10">
            <Button
                Text="Add new item"
                Clicked="btnClicked"
                MaximumWidthRequest="150"
                BackgroundColor="#DCDCDC" />
            <BoxView
                HeightRequest="1"
                Color="#00CC00" />
            <CollectionView
                ItemsSource="{Binding Items}"
                CanReorderItems="True"
                ReorderCompleted="OnReorderCompleted">
                <CollectionView.ItemTemplate>
                    <DataTemplate
                        x:DataType="local:todoItem">
                        <Frame
                            Margin="5"
                            Padding="5"
                            BorderColor="white"
                            CornerRadius="10"
                            BackgroundColor="black">
                            <Grid
                                ColumnDefinitions="Auto, *, Auto"
                                VerticalOptions="Center">
                                <CheckBox
                                    Grid.Column="0"
                                    IsChecked="{Binding isCompleted}" />
                                <Label
                                    Grid.Column="1"
                                    Text="{Binding listItem}">
                                    <Label.Style>
                                        <Style
                                            TargetType="Label">
                                            <Setter
                                                Property="FontSize"
                                                Value="18" />
                                            <Setter
                                                Property="VerticalTextAlignment"
                                                Value="Center" />
                                            <Setter
                                                Property="TextDecorations"
                                                Value="None" />
                                            <!-- Default state -->
                                            <Style.Triggers>
                                                <DataTrigger
                                                    TargetType="Label"
                                                    Binding="{Binding isCompleted}"
                                                    Value="True">
                                                    <Setter
                                                        Property="TextDecorations"
                                                        Value="Strikethrough" />
                                                    <!-- Strikethrough when checked -->
                                                </DataTrigger>
                                                <DataTrigger
                                                    TargetType="Label"
                                                    Binding="{Binding isCompleted}"
                                                    Value="False">
                                                    <Setter
                                                        Property="TextDecorations"
                                                        Value="None" />
                                                    <!-- No strikethrough when unchecked -->
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Label.Style>
                                </Label>
                                <ImageButton
                                    Grid.Column="2"
                                    Source="menu.png"
                                    BackgroundColor="black"
                                    WidthRequest="32"
                                    HeightRequest="32"
                                    Clicked="menuBtnClicked" />
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>